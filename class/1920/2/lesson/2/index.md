[首頁] > [仁愛堂劉皇發夫人小學]

# 2. 迷宮（1）

還記得我們要到哪裡去製作遊戲嗎？是這個網站哦 <https://arcade.makecode.com>！

## 資源

跟著[這個教學影片]做吧！

## 迷宮是什麼？

迷宮是一個經典遊戲。它需要玩家在一個佈滿**分叉路口**的**地圖**裡由**起點**順利到達**終點**，其中一些分叉路口會引領玩家到達**死胡同**，這時候玩家就需要退後到另一個分叉路口去尋找終點。

## 製作迷宮遊戲需要哪些步驟？

1. 建立玩家

2. 製作迷宮地圖
    - 地圖需要有**入口**和**出口**

3. 在遊戲場景中建立迷宮地圖

4. 把玩家放置到地圖入口

5. 允許玩家走過地圖路口
    - 不能允許玩家**穿過墻壁**
    
6. 當玩家到達終點時，程序需要彈出勝利畫面

## 建立玩家

在建立一個遊戲的時候，我們總需要建立一個玩家。還記得我們上星期已經製作了一個可以上下左右動的玩家了嗎？我們直接使用上星期的成品就可以了！

> 回顧
>
> 創立角色需要**三步**，分別是：
> 1. 變數mySprite設為角色類別Player
>       - 告訴電腦我們要起一個mySprite為玩家（Player）
> 2. 控制器移動角色mySprite
>       - 告訴電腦創建的玩家需要可以被控制
> 3. 角色mySprite標記留在畫面設為開
>       - 告訴電腦玩家千萬不能走出畫面外哦！

那麼我們現在學習一下怎麼導入已經做好的作品吧！

1. 下載[已經製作好的玩家]
2. 到<https://arcade.makecode.com>
3. 在*我的所有專案*的右邊，有一個**匯入**按鈕，按下去
4. 現在會彈出一個對話框，選擇左邊的**匯入檔案...**
5. 按下**選擇檔案**，然後在檔案管理中選擇剛剛下載好的[已經製作好的玩家]，並按下**確定**和綠色的**繼續！**按鈕。
6. 匯入成功啦！你現在應該已經在編輯器裡面了。

## 建立迷宮地圖

現在我們有了玩家，那麼就動手建立迷宮的第二重要元素"**地圖**"吧！

1. 選擇**鏡頭**，把**貼圖地圖設為X**拖到**當啟動時**方塊裡的最下方。
2. 按下剛剛拖出來的指令的白色方塊（X），開啟圖畫編輯器編輯地圖。

![地圖]

3. 把圖畫編輯器畫成上方的模樣，其中**綠色**代表**入口**，**紅色**代表**出口**，**褐色**代表**墻壁**，然後按**完成**。

現在你應該已經發現，你的遊戲機裡已經出現了地圖。但是我們還有很多東西沒做，你發現了沒有呢？

## 設立鏡頭跟隨玩家

這樣子做我們才能一直看到玩家的蹤影，不會讓我們玩著玩著不知道玩家去哪裡了。

1. 按下**鏡頭**，把**鏡頭跟隨角色mySprite**拉到**當啟動時**方塊的底部。

## 製作墻壁

雖然我們畫下了褐色的墻壁，但是我們還沒有告訴電腦褐色的就是墻壁呢。

1. 在**鏡頭**中，拉出**貼圖顏色X設為Y墻面使用關**到**當啟動時**方塊裡底部。
2. 在剛剛拉出的命令裡，選擇第一個方格（X），然後選擇**褐色**。
3. 按下第二個方格（Y），開啟圖畫編輯器，填入**褐色**，並按下**完成**。
4. 把命令最後的**關**按一下，設置他為**開**，告訴電腦這是墻壁。

## 設置出口

在這個遊戲裡，我們也需要把出口視為墻壁，為我們以後所做的**事件**做準備。
你說**事件**是什麼？之後會告訴你。

步驟基本跟**製作墻壁相同**，只是改一下顏色。

1. 在**鏡頭**中，拉出**貼圖顏色X設為Y墻面使用關**到**當啟動時**方塊裡底部。
2. 在剛剛拉出的命令裡，選擇第一個方格（X），然後選擇**紅色**。
3. 按下第二個方格（Y），開啟圖畫編輯器，填入**紅色**，並按下**完成**。
4. 把命令最後的**關**按一下，設置他為**開**，告訴電腦這是墻壁。

## 設置入口

我們需要一開始把玩家放到入口處，這樣他才能從入口一步步走到出口。

1. 在**鏡頭**中，拉出**角色mySprite放置到隨機顏色X的貼圖上**到**當啟動時**方塊裡底部。
2. 選擇顏色（X）為**綠色**。（還記得我們設置了綠色是入口嗎？）。
3. 現在玩家就被放到入口（綠色方格）裡啦。

> 關於隨機
>
> 隨機代表讓電腦隨意選擇一個的意思，在這裡是隨意選擇一個某個顏色的一格方塊裡，由於我們只有一個綠色方格，所以即便隨機應該是每次結果都不同，但是因為只有一個，他只能選擇這一個方格。

現在的程序基本上已經完成了。動一下上下左右鍵，玩家能動了，墻壁也有了，但是還差一樣東西，是什麼呢？

## 設置到達終點的勝利畫面

當玩家到達終點時，程序就需要把遊戲判定為勝利，這就是一件**事件**。需要分清楚的是，這一個事件是跟**啟動**是沒有任何關聯的。換句話說，他獨立於**啟動事件**。所以我們要重新建立一個事件，來完成遊戲勝利的命令。

> 事件與命令有什麼區別？
>
> 對於事件，你是會感覺到他會有一個時間觸發點，到了這個時間，事件就會被觸發。而命令不一樣，他只是告訴你需要做一件事情，沒有時間概念。舉個例子，**叫玩家碰撞墻壁**是一個命令；**當玩家碰撞墻壁**是一個事件，"**當**"字非常重要，他表明了時間。

> 啟動是一件事件嗎？
>
> 他**是**一個事件，也是一個程序的入口，讓電腦知道從哪裡執行這個程序。事實上，啟動是一個每個程序都有得事件。

平時的命令是長成一行一行的，那麼事件長成什麼樣子呢？
事件是**C字型**的，用來包含命令，到事件**觸發**時，就會執行C字型裡的命令，跟**當啟動時**一樣。

聊完**事件**的概念，你們想到這個**到達終點**的事件，整個邏輯應該是怎樣的嗎？

他其實是一個**碰撞**事件，當玩家碰撞到終點的格子的時候，遊戲就會判勝。

1. 選擇**鏡頭**，拉出**當角色sprite類別Player碰撞到墻顏色X**到程序空地。

**切記！！！**
由於這個碰撞事件與啟動事件是**獨立**的事件，所以不能放進**當啟動時**事件的方框裡。只要找一個空地放好他就好，電腦就能認定他是另外一個事件，而不是啟動事件了。

2. 在剛剛拉出的事件裡，在最後把顏色（X）選擇成**紅色**。（我們的紅色是終點哦！）
3. 選擇**遊戲**，並拉出**遊戲結束 結果LOSE**到**碰撞事件**中。（再說一次，這是碰撞事件裡要執行的命令，千萬不能放在**當啟動時**裡哦！）
4. 在剛剛拉出的命令裡，按下**LOSE**，設置成WIN。

> 注意
>
> 如果程序有錯誤，請在**角色**中，拉到最底，拉出**Player**，覆蓋**碰撞事件**中的**Player**字眼。就能解決錯誤了。
> 擁有這樣的錯誤是由於後台設置了兩個不同種類的**Player**，導致程序混亂所致。

## 下載遊戲到Meowbit

你已經製作好遊戲啦，現在只需要把遊戲下載到Meowbit就可以在遊戲機玩了。

1. 把Meowbit利用電線連接電腦的USB接口。
2. 在程序界面，按下下載鍵。
3. 選擇Meowbit，程序就應該會下載咯。
4. 利用檔案總管，把剛下載好的檔案拉到Meowbit的Drive裡，並盡情遊玩吧！


<!-- links -->
[首頁]: ../../../../../index.md
[仁愛堂劉皇發夫人小學]: ../../index.md
[這個教學影片]: ./resource/tutorial2.flv
[已經製作好的玩家]: ./resource/start.png
[地圖]: ./resource/map.png